(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{81:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n,s,c,r,i,l,o,d,j,b=a(0),u=a.n(b),m=a(69),O=a.n(m),h=(a(81),a(27)),x=a(74),v=a(97),p=a(98),g=a(95),f=a(73),k=a(19),y=a(6),N=a(100),w=a(29),S=a(96),_=Object(S.a)(n||(n=Object(w.a)(["\n  query user($username: String!) {\n    user(username: $username) {\n      _id\n      username\n      email\n      reservations {\n        _id\n        title\n        date\n        createdAt\n      }\n    }\n  }\n"]))),$=Object(S.a)(s||(s=Object(w.a)(["\n  query getReservations {\n    reservations {\n      _id\n      title\n      date\n      createdAt\n      trucks {\n        _id\n        image\n        truckModel\n        rentalPrice\n      }\n    }\n  }\n"]))),I=Object(S.a)(c||(c=Object(w.a)(["\n  query getTrucks {\n    trucks {\n      _id\n      image\n      truckModel\n      rentalPrice\n    }\n  }\n"]))),T=Object(S.a)(r||(r=Object(w.a)(["\n  query getSingleReservation($reservationId: ID!) {\n    reservation(reservationId: $reservationId) {\n      _id\n      title\n      date\n      createdAt\n      trucks {\n        _id\n        image\n        truckModel\n        rentalPrice\n      }\n    }\n  }\n"]))),R=Object(S.a)(i||(i=Object(w.a)(["\n  query me {\n    me {\n      _id\n      username\n      email\n      reservations {\n        _id\n        title\n        date\n        createdAt\n      }\n    }\n  }\n"]))),P=a(2),A=function(){var e=Object(N.a)(I),t=(e.loading,e.data),a=(null===t||void 0===t?void 0:t.trucks)||[];return a.length?(console.log(a),Object(P.jsx)("main",{children:Object(P.jsxs)("div",{className:"flex-row justify-center",children:[Object(P.jsxs)("h5",{id:"list-title",children:["Reservations: ",Date," ",Object(P.jsx)("i",{class:"fa-regular fa-calendar-check"})]}),a.map((function(e){return Object(P.jsx)("div",{className:"card mb-3",id:"user-parlays",children:e})}))]})})):Object(P.jsx)("h3",{})},C=a(8),D=a(15),L=a(13),q=a(9),M=a(91),U=Object(S.a)(l||(l=Object(w.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),E=Object(S.a)(o||(o=Object(w.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),F=(Object(S.a)(d||(d=Object(w.a)(["\n  mutation addReservation($reservationId: ID!, $title: String!, $date: String!) {\n    addReservation(reservationId: $reservationId, title: $title, date: $date) {\n      _id\n      title\n      date\n      createdAt\n       truck {\n        _id\n        image\n        truckModel\n        rentalPrice\n      }\n    }\n  }\n"]))),Object(S.a)(j||(j=Object(w.a)(["\n  mutation addTruck ($reservationId: ID!, $image: String!, $truckModel: String!, $rentalPrice: Int!) {\n    addTruck(reservationId: $reservationId, image: $image, truckModel: $truckModel, rentalPrice: $rentalPrice) {\n      trucks {\n        _id\n        image\n        truckModel\n        rentalPrice\n      }\n    }\n  }\n"]))),a(17)),z=a(18),Y=a(63),W=new(function(){function e(){Object(F.a)(this,e)}return Object(z.a)(e,[{key:"getProfile",value:function(){return Object(Y.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){return Object(Y.a)(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.reload()}}]),e}()),B=function(){var e=Object(b.useState)({username:"",email:"",password:""}),t=Object(q.a)(e,2),a=t[0],n=t[1],s=Object(M.a)(E),c=Object(q.a)(s,2),r=c[0],i=c[1],l=i.error,o=i.data,d=function(e){var t=e.target,s=t.name,c=t.value;n(Object(h.a)(Object(h.a)({},a),{},Object(L.a)({},s,c)))},j=function(){var e=Object(D.a)(Object(C.a)().mark((function e(t){var n,s;return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(a),e.prev=2,e.next=5,r({variables:Object(h.a)({},a)});case 5:n=e.sent,s=n.data,W.login(s.addUser.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(P.jsx)("main",{className:"flex-row justify-center",children:Object(P.jsx)("div",{className:"col",children:Object(P.jsxs)("div",{className:"card",children:[Object(P.jsxs)("h4",{className:"card-header",children:["Sign Up ",Object(P.jsx)("i",{class:"fa-solid fa-user-plus"})]}),Object(P.jsxs)("div",{className:"card-body",children:[o?Object(P.jsxs)("button",{className:"btn",id:"btn1",children:["Success! You may now head"," ",Object(P.jsx)(k.b,{to:"/",children:"back to the homepage."})]}):Object(P.jsxs)("form",{onSubmit:j,children:[Object(P.jsx)("input",{className:"form-input",placeholder:"Your username",name:"username",type:"text",value:a.name,onChange:d}),Object(P.jsx)("link",{rel:"stylesheet",href:"https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"}),Object(P.jsx)("script",{src:"https://upload-widget.cloudinary.com/global/all.js",type:"text/javascript"}),Object(P.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:a.email,onChange:d}),Object(P.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:a.password,onChange:d}),Object(P.jsxs)("button",{id:"btn1",className:"btn",type:"submit",children:["Submit ",Object(P.jsx)("i",{class:"fa-regular fa-paper-plane"})]})]}),l&&Object(P.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:l.message})]})]})})})},J=function(e){var t=Object(b.useState)({email:"",password:""}),a=Object(q.a)(t,2),n=a[0],s=a[1],c=Object(M.a)(U),r=Object(q.a)(c,2),i=r[0],l=r[1],o=l.error,d=l.data,j=function(e){var t=e.target,a=t.name,c=t.value;s(Object(h.a)(Object(h.a)({},n),{},Object(L.a)({},a,c)))},u=function(){var e=Object(D.a)(Object(C.a)().mark((function e(t){var a,c;return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(n),e.prev=2,e.next=5,i({variables:Object(h.a)({},n)});case 5:a=e.sent,c=a.data,W.login(c.login.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:s({email:"",password:""});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(P.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(P.jsx)("div",{className:"col-12 col-lg-10",children:Object(P.jsxs)("div",{className:"card",id:"log",children:[Object(P.jsxs)("h4",{id:"login",className:"card-header",children:["Login ",Object(P.jsx)("i",{class:"fa-solid fa-circle-user"})]}),Object(P.jsxs)("div",{className:"card-body",children:[d?Object(P.jsxs)("p",{children:["Success! You may now head"," ",Object(P.jsx)(k.b,{to:"/",children:"back to the homepage."})]}):Object(P.jsxs)("form",{onSubmit:u,children:[Object(P.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:n.email,onChange:j}),Object(P.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:n.password,onChange:j}),Object(P.jsxs)("button",{className:"btn btn-block btn-primary",style:{cursor:"pointer"},type:"submit",children:["Submit ",Object(P.jsx)("i",{class:"fa-regular fa-paper-plane"})]})]}),o&&Object(P.jsx)("div",{id:"alert",className:"my-3 p-3 text-white",children:o.message})]})]})})})},V=function(){var e=Object(N.a)(I),t=e.loading,a=e.data,n=(null===a||void 0===a?void 0:a.trucks)||[];return n.length?(console.log(n),Object(P.jsx)("div",{children:t?Object(P.jsx)("div",{children:"Loading...\ud83d\udcb8..."}):Object(P.jsx)("div",{className:"flex-row my-4",id:"gaming",children:n&&n.map((function(e){return Object(P.jsx)("div",{className:"card mb-3",id:"game-card",children:Object(P.jsxs)("div",{className:"p-3 text-light",id:"game-card",children:[Object(P.jsxs)("div",{id:"game-cardss",children:[Object(P.jsx)("p",{children:Object(P.jsx)("img",{id:"team",src:"https://res.cloudinary.com/dhqsixgmo/image/upload/v1667007982/away_m9lnn0.png",alt:"Away"})}),Object(P.jsx)("p",{className:"card-body",children:e.truckModel}),Object(P.jsxs)("p",{className:"card-body",children:["Rental Price Total: (",e.rentalPrice,")"]})]}),Object(P.jsx)("p",{id:"vs",children:Object(P.jsx)("img",{src:"https://res.cloudinary.com/dhqsixgmo/image/upload/v1667008346/vs1_mwfonr.png",alt:"VS"})}),Object(P.jsx)("div",{id:"game-cards"})]})},e._id)}))})})):Object(P.jsx)("h3",{})},G=function(){var e=Object(y.r)().reservationId,t=Object(N.a)(T,{variables:{reservationid:e}}),a=t.loading,n=t.data,s=(null===n||void 0===n?void 0:n.reservation)||{};return a?Object(P.jsx)("div",{children:"\ud83d\udcb8...\ud83d\udcb8"}):Object(P.jsxs)("div",{className:"my-3",id:"single-parlay",children:[Object(P.jsxs)("h3",{className:"card-header bg-dark text-light",id:"single-header",children:[s.username," ",Object(P.jsx)("br",{}),"had this pick on ",s.createdAt]}),Object(P.jsx)("div",{className:"bg-light py-4",children:Object(P.jsx)("blockquote",{className:"p-4",id:"blockquote",children:s.name})}),Object(P.jsx)("div",{className:"my-5",children:Object(P.jsx)(V,{trucks:s.trucks})})]})},H=function(e){var t=e.reservations,a=(e.title,e.Wins,e.Losses,e.showUsername),n=void 0===a||a,s=Object(y.r)().username,c=Object(N.a)(s?_:R,$,{variables:{username:s}}),r=c.loading,i=c.data,l=(null===i||void 0===i?void 0:i.me)||(null===i||void 0===i?void 0:i.user)||{};return W.loggedIn()&&W.getProfile().data.username===s?Object(P.jsx)(y.a,{to:"/reservations"}):r?Object(P.jsx)("div",{children:"Loading...\ud83d\udcb8..."}):null!==l&&void 0!==l&&l.username?Object(P.jsxs)("div",{className:"row",id:"parlay-row",children:[Object(P.jsxs)("h5",{id:"user-title",children:["".concat(l.username,"'s Picks"),Object(P.jsx)("p",{id:"totals",children:"TOTALS"}),Object(P.jsxs)("p",{id:"wins",children:["Winnings: ","+$3,200.00"]}),Object(P.jsxs)("p",{id:"losses",children:["Losses: ","-$1,650.00"]}),Object(P.jsx)("p",{children:"Winner...Winner \ud83d\udcb0...Chicken...Dinner \ud83d\udc14"})]}),Object(P.jsx)("main",{className:"flex-row justify-center",id:"action",children:t&&t.map((function(e){return Object(P.jsx)("div",{className:"card mb-3",id:"user-parlays",children:Object(P.jsx)("h4",{className:"card-header",id:"single-header",children:n?Object(P.jsx)("p",{children:Object(P.jsxs)(k.b,{className:"text-light",to:"/profiles/".concat(e.username),children:[Object(P.jsxs)("span",{style:{fontSize:"2rem"},children:[e.name,Object(P.jsxs)("p",{style:{fontSize:"1.5rem"},children:[" Date Reserved: [",e.date,"]"]}),Object(P.jsxs)("p",{style:{fontSize:"1.5rem"},children:["Ticket Code: [",e.win_choice,"]"]}),Object(P.jsx)("br",{})]}),Object(P.jsxs)("span",{style:{fontSize:"1rem"},children:["Created On: ",e.createdAt]})]})}):Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)("span",{style:{fontSize:"1rem"},children:["Previous reserved date: ",e.createdAt]})})})},e._id)}))})]}):Object(P.jsxs)("h4",{id:"title-list",children:["Login in to play\u2757 ",Object(P.jsx)("i",{id:"error_icon",class:"fa-solid fa-circle-exclamation"})," Click on the links above to Sign Up ",Object(P.jsx)("i",{class:"fa-solid fa-user-plus"})," or Log In ",Object(P.jsx)("i",{class:"fa-solid fa-circle-user"})," ",Object(P.jsx)("i",{id:"error_icon",class:"fa-solid fa-circle-exclamation"})]})};var K=function(){var e=Object(b.useState)(""),t=Object(q.a)(e,2),a=t[0],n=t[1],s=Object(b.useState)(""),c=Object(q.a)(s,2),r=c[0],i=c[1],l=Object(b.useState)(" "),o=Object(q.a)(l,2),d=o[0],j=o[1],u=Object(b.useState)(" "),m=Object(q.a)(u,2),O=m[0],h=m[1],x=Object(y.r)(),v=x.username,p=(x.user,Object(N.a)(v?_:R,$,{variables:{username:v}})),g=p.loading,f=p.data,k=(null===f||void 0===f?void 0:f.reservation)||[],w=(null===f||void 0===f?void 0:f.trucks)||[];return console.log(k,w),g?Object(P.jsx)("div",{children:"Loading...\ud83d\udcb8..."}):Object(P.jsxs)("form",{onSubmit:function(e){e.preventDefault(),alert("Reservation request, successfully submitted ".concat(Object(P.jsx)("i",{id:"success",class:"fa-solid fa-circle-check"}),"\n            Reservation: ").concat(a," \n\n            Truck: ").concat(d," \n\n            Rental Price Total: ").concat(O," \n\n            Current Reservation Date: ").concat(r," \n\n            "))},className:"flex-row justify-center",id:"form",children:[Object(P.jsxs)("div",{children:[Object(P.jsx)("label",{id:"label",children:"Select Reservation:"}),Object(P.jsx)("input",{type:"checkbox",name:"name",onChange:function(e){n(e.target.value)},value:[0,1,0,1]}),Object(P.jsx)("label",{id:"label",for:a,children:a})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("label",{id:"label",children:"Select Desired Truck Make & Model:"}),Object(P.jsx)("input",{type:"checkbox",name:"truckModel",onChange:function(e){j(e.target.value)},value:[d]}),Object(P.jsx)("label",{id:"label",for:r,children:r}),Object(P.jsx)("label",{id:"label"}),Object(P.jsx)("input",{type:"checkbox",name:"date",onChange:function(e){i(e.target.value)},value:[r]}),Object(P.jsx)("label",{id:"label",for:O,children:O}),Object(P.jsx)("input",{type:"checkbox",name:"rentalPrice",onChange:function(e){h(e.target.value)},value:[O]})]}),Object(P.jsxs)("button",{className:"btn",type:"submit",children:["Request Reservation ",Object(P.jsx)(b.FontAwesomeIcon,{icon:"fa-solid fa-calendar-plus"})]})]})},Q=function(){var e=Object(N.a)($),t=e.loading,a=e.data,n=(null===a||void 0===a?void 0:a.reservations)||[],s=(null===a||void 0===a?void 0:a.me)||(null===a||void 0===a?void 0:a.user)||{};return t?Object(P.jsx)("div",{children:"Loading...\ud83d\udcb8..."}):Object(P.jsx)("main",{children:Object(P.jsxs)("div",{className:"flex-row justify-center",children:[Object(P.jsx)("div",{id:"parlay-form",className:"col-12 col-md-10 mb-3 p-3",children:Object(P.jsx)(K,{})}),Object(P.jsx)("div",{className:"flex-row justify-center",children:t?Object(P.jsx)("div",{children:"Loading...\ud83d\udcb8..."}):Object(P.jsx)(H,{reservations:n,title:s.username+"s Reservations"})})]})})},X=a(72),Z=a.n(X),ee=function(){Object(b.useEffect)((function(){Z.a.init({duration:2e3}),window.addEventListener("scroll",(function(){}))}),[]);return Object(P.jsxs)("nav",{id:"navbar",className:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(P.jsx)(k.b,{className:"text-light",to:"/",children:Object(P.jsx)("h1",{id:"title",children:Object(P.jsx)("img",{id:"build",src:"https://res.cloudinary.com/dhqsixgmo/image/upload/v1698379989/SITE_NAV_TITLE_qwutim.svg",alt:"U-Truck"})})}),Object(P.jsx)("div",{className:"row",id:"links",children:W.loggedIn()?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(k.b,{className:"btn",to:"/me",children:[W.getProfile().data.username,"'s Dashboard"]}),Object(P.jsx)(k.b,{to:"/reservations",children:Object(P.jsxs)("button",{className:"btn",to:"/reservations",children:["Reservations ",Object(P.jsx)("i",{class:"fa-regular fa-calendar-check"})]})}),Object(P.jsxs)("button",{className:"btn",onClick:function(e){e.preventDefault(),W.logout()},children:["Logout ",Object(P.jsx)("i",{class:"fa-solid fa-right-from-bracket"})]})]}):Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(k.b,{className:"btn",to:"/",children:["Trucks  ",Object(P.jsx)("i",{id:"truck",class:"fa-solid fa-truck-fast"})]}),Object(P.jsxs)(k.b,{className:"btn",to:"/login",children:["Login ",Object(P.jsx)("i",{class:"fa-solid fa-circle-user"})]}),Object(P.jsxs)(k.b,{className:"btn",to:"/signup",children:["Sign Up ",Object(P.jsx)("i",{class:"fa-solid fa-user-plus"})]})]})})]})},te=function(){var e=(new Date).getFullYear(),t=Object(y.n)(),a=Object(y.p)();return Object(P.jsx)("footer",{id:"footer",className:"w-100 mt-auto bg-secondary p-4",children:Object(P.jsxs)("div",{className:"container text-center mb-5",children:["/"!==t.pathname&&Object(P.jsxs)("button",{id:"back",className:"btn",onClick:function(){return a(-1)},children:[Object(P.jsx)("i",{class:"fa-solid fa-left-long"})," Go Back"]}),Object(P.jsxs)("h4",{id:"foot-title",children:[Object(P.jsxs)("div",{className:"col-12 col-sm-12 col-md-8 mx-auto",children:[Object(P.jsx)("a",{className:"px-3",href:"https://github.com/AASports89/u-truck",target:"_blank",rel:"noopener noreferrer",children:Object(P.jsx)("i",{id:"github",className:"fa-brands fa-github"})})," "]}),Object(P.jsxs)("strong",{children:[" AASports89 \xa9 ",e," "]})]})]})})},ae=(new Date).toString().split(" ").splice(1,3).join(" ");document.write(ae);var ne=function(){var e=Object(N.a)($),t=e.loading,a=e.data,n=(null===a||void 0===a?void 0:a.reservations)||[];return n.length?(console.log(n),Object(P.jsxs)("div",{children:[t?Object(P.jsx)("div",{children:"Loading...\ud83d\udcb8..."}):Object(P.jsxs)("div",{className:"flex-row justify-center",id:"parlaying",children:[Object(P.jsx)("div",{className:"flex-row justify-center",children:Object(P.jsxs)("h5",{id:"par-title",children:["Reservations for: ",ae," ",Object(P.jsx)(b.FontAwesomeIcon,{id:"cal_success",icon:"fa-solid fa-calendar-check"})]})}),n&&n.map((function(e){return Object(P.jsxs)("div",{className:"card mb-3",id:"game-cardss",children:[Object(P.jsx)("p",{className:"card-body",children:e.name}),Object(P.jsxs)("p",{className:"card-body",children:[" Reservation Confirmation: [",e.win_choice,"]"]}),e.trucks&&e.trucks.map((function(e){return Object(P.jsxs)("div",{children:[Object(P.jsx)("p",{children:e.truckModel}),Object(P.jsx)("p",{children:e.rentalPrice})]},e._id)}))]},e._id)}))]}),";"]})):Object(P.jsx)("h3",{})},se=Object(x.a)({uri:"/graphql"}),ce=Object(f.a)((function(e,t){var a=t.headers,n=localStorage.getItem("id_token");return{headers:Object(h.a)(Object(h.a)({},a),{},{authorization:n?"Bearer ".concat(n):""})}})),re=new v.a({link:ce.concat(se),cache:new p.a});var ie=function(){return Object(P.jsx)(g.a,{client:re,children:Object(P.jsxs)(k.a,{children:[Object(P.jsx)("header",{children:Object(P.jsx)(ee,{})}),Object(P.jsxs)("div",{className:"flex-column justify-flex-start min-100-vh",children:[Object(P.jsx)("div",{className:"container",children:Object(P.jsxs)(y.d,{children:[Object(P.jsx)(y.b,{path:"/",element:Object(P.jsx)(A,{})}),Object(P.jsx)(y.b,{path:"/ReservationForm",element:Object(P.jsx)(K,{})}),Object(P.jsx)(y.b,{path:"/reservations",element:Object(P.jsx)(ne,{})}),Object(P.jsx)(y.b,{path:"/login",element:Object(P.jsx)(J,{})}),Object(P.jsx)(y.b,{path:"/signup",element:Object(P.jsx)(B,{})}),Object(P.jsx)(y.b,{path:"/me",element:Object(P.jsx)(Q,{})}),Object(P.jsx)(y.b,{path:"/profiles/:username",element:Object(P.jsx)(Q,{})}),Object(P.jsx)(y.b,{path:"/reservations/:reservationId",element:Object(P.jsx)(G,{})})]})}),Object(P.jsx)(te,{})]})]})})};O.a.render(Object(P.jsx)(u.a.StrictMode,{children:Object(P.jsx)(ie,{})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.9380fc4d.chunk.js.map