(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{81:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var a,c,s,r,i,l=n(0),o=n.n(l),d=n(69),j=n.n(d),b=(n(81),n(26)),u=n(74),m=n(97),O=n(98),h=n(95),x=n(73),v=n(19),p=n(6),g=n(100),f=n(28),k=n(96),y=Object(k.a)(a||(a=Object(f.a)(["\n  query user($username: String!) {\n    user(username: $username) {\n      _id\n      username\n      email\n      reservations {\n        _id\n        name\n        win_choice\n        createdAt\n      }\n    }\n  }\n"]))),w=Object(k.a)(c||(c=Object(f.a)(["\n  query getReservations {\n    reservations {\n      _id\n      name\n      win_choice\n      createdAt\n      trucks {\n        _id\n        truckModel\n        rentalPrice\n      }\n    }\n  }\n"]))),N=Object(k.a)(s||(s=Object(f.a)(["\n  query getTrucks {\n    trucks {\n      _id\n      truckModel\n      rentalPrice\n    }\n  }\n"]))),S=Object(k.a)(r||(r=Object(f.a)(["\n  query getSingleReservation($reservationId: ID!) {\n    reservation(reservationId: $reservationId) {\n      _id\n      name\n      win_choice\n      createdAt\n      trucks {\n        _id\n        truckModel\n        rentalPrice\n      }\n    }\n  }\n"]))),_=Object(k.a)(i||(i=Object(f.a)(["\n  query me {\n    me {\n      _id\n      username\n      email\n      reservations {\n        _id\n        name\n        win_choice\n        createdAt\n      }\n    }\n  }\n"]))),I=n(2),$=function(){var e=Object(g.a)(N),t=e.loading,n=e.data,a=(null===n||void 0===n?void 0:n.trucks)||[];return a.length?(console.log(a),Object(I.jsx)("div",{children:t?Object(I.jsx)("div",{children:"Loading...\ud83d\udcb8..."}):Object(I.jsx)("div",{className:"flex-row my-4",id:"gaming",children:a&&a.map((function(e){return Object(I.jsx)("div",{className:"card mb-3",id:"game-card",children:Object(I.jsxs)("div",{className:"p-3 text-light",id:"game-card",children:[Object(I.jsxs)("div",{id:"game-cardss",children:[Object(I.jsx)("p",{children:Object(I.jsx)("img",{id:"team",src:"https://res.cloudinary.com/dhqsixgmo/image/upload/v1667007982/away_m9lnn0.png",alt:"Away"})}),Object(I.jsx)("p",{className:"card-body",children:e.truckModel}),Object(I.jsxs)("p",{className:"card-body",children:["Rental Price Total: (",e.rentalPrice,")"]})]}),Object(I.jsx)("p",{id:"vs",children:Object(I.jsx)("img",{src:"https://res.cloudinary.com/dhqsixgmo/image/upload/v1667008346/vs1_mwfonr.png",alt:"VS"})}),Object(I.jsx)("div",{id:"game-cards"})]})},e._id)}))})})):Object(I.jsx)("h3",{})},C=(new Date).toString().split(" ").splice(1,3).join(" ");document.write(C);var T,P,R,L,A=function(){return Object(I.jsx)("main",{children:Object(I.jsxs)("div",{className:"flex-row justify-center",children:[Object(I.jsxs)("h5",{id:"list-title",children:["Reservations: ",C," ",Object(I.jsx)("i",{class:"fa-regular fa-calendar-check"})]}),Object(I.jsx)($,{})]})})},D=n(8),q=n(15),M=n(13),F=n(9),U=n(91),z=Object(k.a)(T||(T=Object(f.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),B=Object(k.a)(P||(P=Object(f.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),E=(Object(k.a)(R||(R=Object(f.a)(["\n  mutation addReservation($reservationId: ID!) {\n    addReservation(reservationId: $reservationId) {\n      _id\n      date\n      createdAt\n       truck {\n        _id\n        truckModel\n        rentalPrice\n      }\n    }\n  }\n"]))),Object(k.a)(L||(L=Object(f.a)(["\n  mutation addTruck ($reservationId: ID!, $truckModel: String!, $rentalPrice: Int!) {\n    addTruck(reservationId: $reservationId, truckModel: $truckModel, rentalPrice: $rentalPrice) {\n      trucks {\n        _id\n        truckModel\n        rentalPrice\n      }\n    }\n  }\n"]))),n(17)),Y=n(18),W=n(63),J=new(function(){function e(){Object(E.a)(this,e)}return Object(Y.a)(e,[{key:"getProfile",value:function(){return Object(W.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){return Object(W.a)(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.reload()}}]),e}()),G=function(){var e=Object(l.useState)({username:"",email:"",password:""}),t=Object(F.a)(e,2),n=t[0],a=t[1],c=Object(U.a)(B),s=Object(F.a)(c,2),r=s[0],i=s[1],o=i.error,d=i.data,j=function(e){var t=e.target,c=t.name,s=t.value;a(Object(b.a)(Object(b.a)({},n),{},Object(M.a)({},c,s)))},u=function(){var e=Object(q.a)(Object(D.a)().mark((function e(t){var a,c;return Object(D.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(n),e.prev=2,e.next=5,r({variables:Object(b.a)({},n)});case 5:a=e.sent,c=a.data,J.login(c.addUser.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsx)("main",{className:"flex-row justify-center",children:Object(I.jsx)("div",{className:"col",children:Object(I.jsxs)("div",{className:"card",children:[Object(I.jsxs)("h4",{className:"card-header",children:["Sign Up ",Object(I.jsx)("i",{class:"fa-solid fa-user-plus"})]}),Object(I.jsxs)("div",{className:"card-body",children:[d?Object(I.jsxs)("button",{className:"btn",id:"btn1",children:["Success! You may now head"," ",Object(I.jsx)(v.b,{to:"/",children:"back to the homepage."})]}):Object(I.jsxs)("form",{onSubmit:u,children:[Object(I.jsx)("input",{className:"form-input",placeholder:"Your username",name:"username",type:"text",value:n.name,onChange:j}),Object(I.jsx)("link",{rel:"stylesheet",href:"https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"}),Object(I.jsx)("script",{src:"https://upload-widget.cloudinary.com/global/all.js",type:"text/javascript"}),Object(I.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:n.email,onChange:j}),Object(I.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:n.password,onChange:j}),Object(I.jsxs)("button",{id:"btn1",className:"btn",type:"submit",children:["Submit ",Object(I.jsx)("i",{class:"fa-regular fa-paper-plane"})]})]}),o&&Object(I.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:o.message})]})]})})})},K=function(e){var t=Object(l.useState)({email:"",password:""}),n=Object(F.a)(t,2),a=n[0],c=n[1],s=Object(U.a)(z),r=Object(F.a)(s,2),i=r[0],o=r[1],d=o.error,j=o.data,u=function(e){var t=e.target,n=t.name,s=t.value;c(Object(b.a)(Object(b.a)({},a),{},Object(M.a)({},n,s)))},m=function(){var e=Object(q.a)(Object(D.a)().mark((function e(t){var n,s;return Object(D.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(a),e.prev=2,e.next=5,i({variables:Object(b.a)({},a)});case 5:n=e.sent,s=n.data,J.login(s.login.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:c({email:"",password:""});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(I.jsx)("div",{className:"col-12 col-lg-10",children:Object(I.jsxs)("div",{className:"card",id:"log",children:[Object(I.jsxs)("h4",{id:"login",className:"card-header",children:["Login ",Object(I.jsx)("i",{class:"fa-solid fa-circle-user"})]}),Object(I.jsxs)("div",{className:"card-body",children:[j?Object(I.jsxs)("p",{children:["Success! You may now head"," ",Object(I.jsx)(v.b,{to:"/",children:"back to the homepage."})]}):Object(I.jsxs)("form",{onSubmit:m,children:[Object(I.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:a.email,onChange:u}),Object(I.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:a.password,onChange:u}),Object(I.jsxs)("button",{className:"btn btn-block btn-primary",style:{cursor:"pointer"},type:"submit",children:["Submit ",Object(I.jsx)("i",{class:"fa-regular fa-paper-plane"})]})]}),d&&Object(I.jsx)("div",{id:"alert",className:"my-3 p-3 text-white",children:d.message})]})]})})})},V=function(){var e=Object(p.r)().reservationId,t=Object(g.a)(S,{variables:{reservationid:e}}),n=t.loading,a=t.data,c=(null===a||void 0===a?void 0:a.reservation)||{};return n?Object(I.jsx)("div",{children:"\ud83d\udcb8...\ud83d\udcb8"}):Object(I.jsxs)("div",{className:"my-3",id:"single-parlay",children:[Object(I.jsxs)("h3",{className:"card-header bg-dark text-light",id:"single-header",children:[c.username," ",Object(I.jsx)("br",{}),"had this pick on ",c.createdAt]}),Object(I.jsx)("div",{className:"bg-light py-4",children:Object(I.jsx)("blockquote",{className:"p-4",id:"blockquote",children:c.name})}),Object(I.jsx)("div",{className:"my-5",children:Object(I.jsx)($,{trucks:c.trucks})})]})},H=function(e){var t=e.reservations,n=(e.title,e.Wins,e.Losses,e.showUsername),a=void 0===n||n,c=Object(p.r)().username,s=Object(g.a)(c?y:_,w,{variables:{username:c}}),r=s.loading,i=s.data,l=(null===i||void 0===i?void 0:i.me)||(null===i||void 0===i?void 0:i.user)||{};return J.loggedIn()&&J.getProfile().data.username===c?Object(I.jsx)(p.a,{to:"/reservations"}):r?Object(I.jsx)("div",{children:"Loading...\ud83d\udcb8..."}):null!==l&&void 0!==l&&l.username?Object(I.jsxs)("div",{className:"row",id:"parlay-row",children:[Object(I.jsxs)("h5",{id:"user-title",children:["".concat(l.username,"'s Picks"),Object(I.jsx)("p",{id:"totals",children:"TOTALS"}),Object(I.jsxs)("p",{id:"wins",children:["Winnings: ","+$3,200.00"]}),Object(I.jsxs)("p",{id:"losses",children:["Losses: ","-$1,650.00"]}),Object(I.jsx)("p",{children:"Winner...Winner \ud83d\udcb0...Chicken...Dinner \ud83d\udc14"})]}),Object(I.jsx)("main",{className:"flex-row justify-center",id:"action",children:t&&t.map((function(e){return Object(I.jsx)("div",{className:"card mb-3",id:"user-parlays",children:Object(I.jsx)("h4",{className:"card-header",id:"single-header",children:a?Object(I.jsx)("p",{children:Object(I.jsxs)(v.b,{className:"text-light",to:"/profiles/".concat(e.username),children:[Object(I.jsxs)("span",{style:{fontSize:"2rem"},children:[e.name,Object(I.jsxs)("p",{style:{fontSize:"1.5rem"},children:[" Date Reserved: [",e.date,"]"]}),Object(I.jsxs)("p",{style:{fontSize:"1.5rem"},children:["Ticket Code: [",e.win_choice,"]"]}),Object(I.jsx)("br",{})]}),Object(I.jsxs)("span",{style:{fontSize:"1rem"},children:["Created On: ",e.createdAt]})]})}):Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)("span",{style:{fontSize:"1rem"},children:["Previous reserved date: ",e.createdAt]})})})},e._id)}))})]}):Object(I.jsxs)("h4",{id:"title-list",children:["Login in to play\u2757 ",Object(I.jsx)("i",{id:"error_icon",class:"fa-solid fa-circle-exclamation"})," Click on the links above to Sign Up ",Object(I.jsx)("i",{class:"fa-solid fa-user-plus"})," or Log In ",Object(I.jsx)("i",{class:"fa-solid fa-circle-user"})," ",Object(I.jsx)("i",{id:"error_icon",class:"fa-solid fa-circle-exclamation"})]})};var Q=function(){var e=Object(l.useState)(""),t=Object(F.a)(e,2),n=t[0],a=t[1],c=Object(l.useState)(""),s=Object(F.a)(c,2),r=s[0],i=s[1],o=Object(l.useState)(" "),d=Object(F.a)(o,2),j=d[0],b=d[1],u=Object(l.useState)(" "),m=Object(F.a)(u,2),O=m[0],h=m[1],x=Object(p.r)(),v=x.username,f=(x.user,Object(g.a)(v?y:_,w,{variables:{username:v}})),k=f.loading,N=f.data,S=(null===N||void 0===N?void 0:N.reservation)||[],$=(null===N||void 0===N?void 0:N.trucks)||[];return console.log(S,$),k?Object(I.jsx)("div",{children:"Loading...\ud83d\udcb8..."}):Object(I.jsxs)("form",{onSubmit:function(e){e.preventDefault(),alert("Reservation request, successfully submitted ".concat(Object(I.jsx)("i",{id:"success",class:"fa-solid fa-circle-check"}),"\n            Reservation: ").concat(n," \n\n            Truck: ").concat(j," \n\n            Rental Price Total: ").concat(O," \n\n            Current Reservation Date: ").concat(r," \n\n            "))},className:"flex-row justify-center",id:"form",children:[Object(I.jsxs)("div",{children:[Object(I.jsx)("label",{id:"label",children:"Select Reservation:"}),Object(I.jsx)("input",{type:"checkbox",name:"name",onChange:function(e){a(e.target.value)},value:[0,1,0,1]}),Object(I.jsx)("label",{id:"label",for:n,children:n})]}),Object(I.jsxs)("div",{children:[Object(I.jsx)("label",{id:"label",children:"Select Desired Truck Make & Model:"}),Object(I.jsx)("input",{type:"checkbox",name:"truckModel",onChange:function(e){b(e.target.value)},value:[j]}),Object(I.jsx)("label",{id:"label",for:r,children:r}),Object(I.jsx)("label",{id:"label"}),Object(I.jsx)("input",{type:"checkbox",name:"date",onChange:function(e){i(e.target.value)},value:[r]}),Object(I.jsx)("label",{id:"label",for:O,children:O}),Object(I.jsx)("input",{type:"checkbox",name:"rentalPrice",onChange:function(e){h(e.target.value)},value:[O]})]}),Object(I.jsxs)("button",{className:"btn",type:"submit",children:["Request Reservation ",Object(I.jsx)(l.FontAwesomeIcon,{icon:"fa-solid fa-calendar-plus"})]})]})},X=function(){var e=Object(g.a)(w),t=e.loading,n=e.data,a=(null===n||void 0===n?void 0:n.reservations)||[],c=(null===n||void 0===n?void 0:n.me)||(null===n||void 0===n?void 0:n.user)||{};return t?Object(I.jsx)("div",{children:"Loading...\ud83d\udcb8..."}):Object(I.jsx)("main",{children:Object(I.jsxs)("div",{className:"flex-row justify-center",children:[Object(I.jsx)("div",{id:"parlay-form",className:"col-12 col-md-10 mb-3 p-3",children:Object(I.jsx)(Q,{})}),Object(I.jsx)("div",{className:"flex-row justify-center",children:t?Object(I.jsx)("div",{children:"Loading...\ud83d\udcb8..."}):Object(I.jsx)(H,{reservations:a,title:c.username+"s Reservations"})})]})})},Z=n(72),ee=n.n(Z),te=function(){Object(l.useEffect)((function(){ee.a.init({duration:2e3}),window.addEventListener("scroll",(function(){}))}),[]);return Object(I.jsxs)("nav",{id:"navbar",className:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(I.jsx)(v.b,{className:"text-light",to:"/",children:Object(I.jsx)("h1",{id:"title",children:Object(I.jsx)("img",{id:"build",src:"https://res.cloudinary.com/dhqsixgmo/image/upload/v1698109311/TRCUK_TITLE_debvdm.svg",alt:"Build A Bet"})})}),Object(I.jsx)("div",{className:"row",id:"links",children:J.loggedIn()?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(v.b,{className:"btn",to:"/me",children:[J.getProfile().data.username,"'s Dashboard"]}),Object(I.jsx)(v.b,{to:"/reservations",children:Object(I.jsxs)("button",{className:"btn",to:"/reservations",children:["Reservations ",Object(I.jsx)("i",{class:"fa-regular fa-calendar-check"})]})}),Object(I.jsxs)("button",{className:"btn",onClick:function(e){e.preventDefault(),J.logout()},children:["Logout ",Object(I.jsx)("i",{class:"fa-solid fa-right-from-bracket"})]})]}):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(v.b,{className:"btn",to:"/",children:["Trucks  ",Object(I.jsx)("i",{id:"truck",class:"fa-solid fa-truck-fast"})]}),Object(I.jsxs)(v.b,{className:"btn",to:"/login",children:["Login ",Object(I.jsx)("i",{class:"fa-solid fa-circle-user"})]}),Object(I.jsxs)(v.b,{className:"btn",to:"/signup",children:["Sign Up ",Object(I.jsx)("i",{class:"fa-solid fa-user-plus"})]})]})})]})},ne=function(){var e=(new Date).getFullYear(),t=Object(p.n)(),n=Object(p.p)();return Object(I.jsx)("footer",{id:"footer",className:"w-100 mt-auto bg-secondary p-4",children:Object(I.jsxs)("div",{className:"container text-center mb-5",children:["/"!==t.pathname&&Object(I.jsxs)("button",{id:"back",className:"btn",onClick:function(){return n(-1)},children:[Object(I.jsx)("i",{class:"fa-solid fa-left-long"})," Go Back"]}),Object(I.jsxs)("h4",{id:"foot-title",children:[Object(I.jsxs)("div",{className:"col-12 col-sm-12 col-md-8 mx-auto",children:[Object(I.jsx)("a",{className:"px-3",href:"https://github.com/AASports89/u-truck",target:"_blank",rel:"noopener noreferrer",children:Object(I.jsx)("img",{id:"github",src:"https://res.cloudinary.com/dhqsixgmo/image/upload/v1666484175/public/images/github-icon_mvuylu.png",alt:"github icon"})})," "]}),Object(I.jsxs)("strong",{children:[" AASports89 \xa9 ",e," "]})]})]})})},ae=(new Date).toString().split(" ").splice(1,3).join(" ");document.write(ae);var ce=function(){var e=Object(g.a)(w),t=e.loading,n=e.data,a=(null===n||void 0===n?void 0:n.reservations)||[];return a.length?(console.log(a),Object(I.jsxs)("div",{children:[t?Object(I.jsx)("div",{children:"Loading...\ud83d\udcb8..."}):Object(I.jsxs)("div",{className:"flex-row justify-center",id:"parlaying",children:[Object(I.jsx)("div",{className:"flex-row justify-center",children:Object(I.jsxs)("h5",{id:"par-title",children:["Reservations for: ",ae," ",Object(I.jsx)(l.FontAwesomeIcon,{id:"cal_success",icon:"fa-solid fa-calendar-check"})]})}),a&&a.map((function(e){return Object(I.jsxs)("div",{className:"card mb-3",id:"game-cardss",children:[Object(I.jsx)("p",{className:"card-body",children:e.name}),Object(I.jsxs)("p",{className:"card-body",children:[" Reservation Confirmation: [",e.win_choice,"]"]}),e.trucks&&e.trucks.map((function(e){return Object(I.jsxs)("div",{children:[Object(I.jsx)("p",{children:e.truckModel}),Object(I.jsx)("p",{children:e.rentalPrice})]},e._id)}))]},e._id)}))]}),";"]})):Object(I.jsx)("h3",{})},se=Object(u.a)({uri:"/graphql"}),re=Object(x.a)((function(e,t){var n=t.headers,a=localStorage.getItem("id_token");return{headers:Object(b.a)(Object(b.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),ie=new m.a({link:re.concat(se),cache:new O.a});var le=function(){return Object(I.jsx)(h.a,{client:ie,children:Object(I.jsxs)(v.a,{children:[Object(I.jsx)("header",{children:Object(I.jsx)(te,{})}),Object(I.jsxs)("div",{className:"flex-column justify-flex-start min-100-vh",children:[Object(I.jsx)("div",{className:"container",children:Object(I.jsxs)(p.d,{children:[Object(I.jsx)(p.b,{path:"/",element:Object(I.jsx)(A,{})}),Object(I.jsx)(p.b,{path:"/ReservationForm",element:Object(I.jsx)(Q,{})}),Object(I.jsx)(p.b,{path:"/reservations",element:Object(I.jsx)(ce,{})}),Object(I.jsx)(p.b,{path:"/login",element:Object(I.jsx)(K,{})}),Object(I.jsx)(p.b,{path:"/signup",element:Object(I.jsx)(G,{})}),Object(I.jsx)(p.b,{path:"/me",element:Object(I.jsx)(X,{})}),Object(I.jsx)(p.b,{path:"/profiles/:username",element:Object(I.jsx)(X,{})}),Object(I.jsx)(p.b,{path:"/reservations/:reservationId",element:Object(I.jsx)(V,{})})]})}),Object(I.jsx)(ne,{})]})]})})},oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,101)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};j.a.render(Object(I.jsx)(o.a.StrictMode,{children:Object(I.jsx)(le,{})}),document.getElementById("root")),oe()}},[[83,1,2]]]);
//# sourceMappingURL=main.66a45df1.chunk.js.map